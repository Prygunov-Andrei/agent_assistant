# ๐ ะัะบะพะฒะพะดััะฒะพ ะฟะพ ะฟะตัะตะบะปััะตะฝะธั Telegram ะฑะพัะฐ

## ๐ ะะฑัะฐั ะธะฝัะพัะผะฐัะธั

Telegram bot token ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัััั **ัะพะปัะบะพ ะพะดะฝะธะผ** ัะบะทะตะผะฟะปััะพะผ ะฑะพัะฐ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ.

ะะปั ัะฐะทัะฐะฑะพัะบะธ ะธ ัะตััะธัะพะฒะฐะฝะธั ะฑะพัะฐ ะผั ะธัะฟะพะปัะทัะตะผ ัะธััะตะผั ะฟะตัะตะบะปััะตะฝะธั:
- **ะะพะบะฐะปัะฝัะน ะฑะพั** โ ะฟะพะดะบะปััะตะฝ ะบ ะปะพะบะฐะปัะฝะพะผั backend (http://localhost:8000/api)
- **ะฃะดะฐะปะตะฝะฝัะน ะฑะพั** โ ะฟะพะดะบะปััะตะฝ ะบ production backend (http://188.225.75.124/api)

---

## ๐ ะัััััะน ััะฐัั

### ะะตัะตะบะปััะธัั ะฝะฐ ะปะพะบะฐะปัะฝัะน ะฑะพั

```bash
./bot_switch_to_local.sh
```

**ะงัะพ ะฟัะพะธััะพะดะธั:**
1. โ ะััะฐะฝะฐะฒะปะธะฒะฐะตั ะฑะพัะฐ ะฝะฐ ัะดะฐะปะตะฝะฝะพะผ ัะตัะฒะตัะต
2. โ ะัะพะฒะตััะตั ะปะพะบะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต
3. โ ะะฐะฟััะบะฐะตั ะปะพะบะฐะปัะฝะพะณะพ ะฑะพัะฐ

**ะะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั:**
- ะะพั ัะฐะฑะพัะฐะตั ะปะพะบะฐะปัะฝะพ ะธ ะฟะพะดะบะปััะตะฝ ะบ ะฒะฐัะตะผั ะปะพะบะฐะปัะฝะพะผั backend
- ะะพะถะตัะต ัะฐะทัะฐะฑะฐััะฒะฐัั ะธ ัะตััะธัะพะฒะฐัั ะธะทะผะตะฝะตะฝะธั
- ะัะต ัะพะพะฑัะตะฝะธั ะฒ Telegram ะพะฑัะฐะฑะฐััะฒะฐัััั ะปะพะบะฐะปัะฝัะผ backend

---

### ะะตัะฝััั ะฑะพัะฐ ะฝะฐ ัะตัะฒะตั

```bash
./bot_switch_to_remote.sh
```

**ะงัะพ ะฟัะพะธััะพะดะธั:**
1. โ ะััะฐะฝะฐะฒะปะธะฒะฐะตั ะปะพะบะฐะปัะฝะพะณะพ ะฑะพัะฐ
2. โ ะะฐะฟััะบะฐะตั ะฑะพัะฐ ะฝะฐ ัะดะฐะปะตะฝะฝะพะผ ัะตัะฒะตัะต

**ะะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั:**
- ะะพั ัะฐะฑะพัะฐะตั ะฝะฐ production ัะตัะฒะตัะต
- ะะฑัะฐะฑะฐััะฒะฐะตั ะทะฐะฟัะพัั ะฒ production ะฑะฐะทะต ะดะฐะฝะฝัั
- ะะพัะพะฒ ะบ ะฝะพัะผะฐะปัะฝะพะน ัะฐะฑะพัะต

---

## ๐ ะขะธะฟะธัะฝัะน ัะฐะฑะพัะธะน ะฟัะพัะตัั

### ะะฐัะฐะปะพ ัะฐะฑะพัั ะฝะฐะด ะฑะพัะพะผ

```bash
# 1. ะฃะฑะตะดะธัะตัั ััะพ ะปะพะบะฐะปัะฝัะน backend ะทะฐะฟััะตะฝ
docker-compose up -d backend db

# 2. ะะตัะตะบะปััะธัะต ะฑะพัะฐ ะฝะฐ ะปะพะบะฐะปัะฝัะน ัะตะถะธะผ
./bot_switch_to_local.sh

# 3. ะะฐัะธะฝะฐะนัะต ัะฐะทัะฐะฑะพัะบั!
# ะัะต ะธะทะผะตะฝะตะฝะธั ะฒ backend/telegram_requests/bot/ ะฑัะดัั ะฟัะธะผะตะฝััััั
```

### ะขะตััะธัะพะฒะฐะฝะธะต ะธะทะผะตะฝะตะฝะธะน

```bash
# ะกะผะพััะธัะต ะปะพะณะธ ะฑะพัะฐ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
docker logs -f agent_assistant_telegram_bot_local

# ะัะฟัะฐะฒััะต ัะตััะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะฒ Telegram
# ะัะพะฒะตัััะต ััะพ ะพะฝะพ ะพะฑัะฐะฑะพัะฐะปะพัั ะฟัะฐะฒะธะปัะฝะพ
```

### ะะตะฟะปะพะน ะธะทะผะตะฝะตะฝะธะน

```bash
# 1. ะะฐะบะพะผะผะธัััะต ะธะทะผะตะฝะตะฝะธั
git add .
git commit -m "ะฃะปัััะตะฝะธั ะฑะพัะฐ"

# 2. ะัะฟัะฐะฒััะต ะฝะฐ GitHub
git push origin main

# 3. ะะฒัะพะดะตะฟะปะพะน ะทะฐะฟัััะธััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐ ัะตัะฒะตัะต!

# 4. ะะพัะปะต ััะฟะตัะฝะพะณะพ ะดะตะฟะปะพั ะฒะตัะฝะธัะต ะฑะพัะฐ ะฝะฐ ัะตัะฒะตั
./bot_switch_to_remote.sh
```

---

## ๐๏ธ ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

### ะะพะบะฐะปัะฝัะน ะฑะพั

```bash
# ะะฐะฟััะบ (ัะตัะตะท ัะบัะธะฟั)
./bot_switch_to_local.sh

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker logs -f agent_assistant_telegram_bot_local

# ะะตัะตะทะฐะฟััะบ
docker-compose -f docker-compose.bot.local.yml restart

# ะััะฐะฝะพะฒะบะฐ
docker-compose -f docker-compose.bot.local.yml down

# ะะตัะตัะฑะพัะบะฐ ะธ ะทะฐะฟััะบ
docker-compose -f docker-compose.bot.local.yml up -d --build
```

### ะฃะดะฐะปะตะฝะฝัะน ะฑะพั

```bash
# ะะฐะฟััะบ (ัะตัะตะท ัะบัะธะฟั)
./bot_switch_to_remote.sh

# ะัะพัะผะพัั ะปะพะณะพะฒ
ssh root@188.225.75.124
cd /opt/agent_assistant
docker-compose -f docker-compose.prod.yml logs -f telegram-bot

# ะกัะฐััั
ssh root@188.225.75.124 "cd /opt/agent_assistant && docker-compose -f docker-compose.prod.yml ps telegram-bot"
```

---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะะพะบะฐะปัะฝัะน ะฑะพั
- **ะะพะฝัะธะณ:** `docker-compose.bot.local.yml`
- **API URL:** `http://host.docker.internal:8000/api`
- **ะะพะฝัะตะนะฝะตั:** `agent_assistant_telegram_bot_local`

### ะฃะดะฐะปะตะฝะฝัะน ะฑะพั
- **ะะพะฝัะธะณ:** `docker-compose.prod.yml`
- **API URL:** `http://backend:8000/api`
- **ะกะตัะฒะตั:** `217.151.231.96`

---

## ๐ ะัะพะฒะตัะบะฐ ััะฐัััะฐ

### ะะดะต ัะตะนัะฐั ัะฐะฑะพัะฐะตั ะฑะพั?

```bash
# ะะพะบะฐะปัะฝะพ
docker ps | grep telegram_bot_local

# ะฃะดะฐะปะตะฝะฝะพ
ssh root@217.151.231.96 "docker ps | grep telegram-bot"
```

ะะพะปะถะตะฝ ัะฐะฑะพัะฐัั **ัะพะปัะบะพ ะพะดะธะฝ**!

---

## โ๏ธ ะะฐะถะฝัะต ะทะฐะผะตัะฐะฝะธั

### ะะตัะตะด ะฝะฐัะฐะปะพะผ ัะฐะฑะพัั ั ะปะพะบะฐะปัะฝัะผ ะฑะพัะพะผ:

โ **ะฃะฑะตะดะธัะตัั ััะพ ะปะพะบะฐะปัะฝัะน backend ะทะฐะฟััะตะฝ:**
```bash
curl http://localhost:8000/api/
# ะะพะปะถะตะฝ ะฒะตัะฝััั JSON ะพัะฒะตั
```

โ **ะฃะฑะตะดะธัะตัั ััะพ .env ัะฐะนะป ะฝะฐัััะพะตะฝ:**
```bash
grep BOT_TOKEN .env
# ะะพะปะถะตะฝ ะฟะพะบะฐะทะฐัั ะฒะฐั bot token
```

### ะะพัะปะต ะทะฐะฒะตััะตะฝะธั ัะฐะฑะพัั:

โ **ะัะตะณะดะฐ ะฒะพะทะฒัะฐัะฐะนัะต ะฑะพัะฐ ะฝะฐ ัะตัะฒะตั:**
```bash
./bot_switch_to_remote.sh
```

โ **ะะ ะบะพะผะผะธัััะต ั ะทะฐะฟััะตะฝะฝัะผ ะปะพะบะฐะปัะฝัะผ ะฑะพัะพะผ!**
ะกะฝะฐัะฐะปะฐ ะฒะตัะฝะธัะต ะฑะพัะฐ ะฝะฐ ัะตัะฒะตั, ะฟะพัะพะผ ะดะตะปะฐะนัะต push.

---

## ๐ Troubleshooting

### ะะพั ะฝะต ะพัะฒะตัะฐะตั

```bash
# 1. ะัะพะฒะตัััะต ะปะพะณะธ
docker logs agent_assistant_telegram_bot_local

# 2. ะัะพะฒะตัััะต ััะพ backend ะดะพัััะฟะตะฝ
curl http://localhost:8000/api/

# 3. ะะตัะตะทะฐะฟัััะธัะต ะฑะพัะฐ
docker-compose -f docker-compose.bot.local.yml restart
```

### ะัะธะฑะบะฐ "Connection refused"

**ะัะพะฑะปะตะผะฐ:** ะะพะบะฐะปัะฝัะน ะฑะพั ะฝะต ะผะพะถะตั ะฟะพะดะบะปััะธัััั ะบ backend

**ะะตัะตะฝะธะต:**
```bash
# ะฃะฑะตะดะธัะตัั ััะพ backend ะทะฐะฟััะตะฝ
docker-compose up -d backend db

# ะัะพะฒะตัััะต ััะพ ะฟะพัั 8000 ะดะพัััะฟะตะฝ
curl http://localhost:8000/api/
```

### ะะฑะฐ ะฑะพัะฐ ะฝะต ัะฐะฑะพัะฐัั

**ะัะพะฑะปะตะผะฐ:** ะกะปััะฐะนะฝะพ ะพััะฐะฝะพะฒะธะปะธ ะพะฑะฐ ะฑะพัะฐ

**ะะตัะตะฝะธะต:**
```bash
# ะะฐะฟัััะธัะต ัะดะฐะปะตะฝะฝะพะณะพ (production ะฒัะตะณะดะฐ ะฒะฐะถะฝะตะต)
./bot_switch_to_remote.sh

# ะะปะธ ะปะพะบะฐะปัะฝะพะณะพ (ะดะปั ัะฐะทัะฐะฑะพัะบะธ)
./bot_switch_to_local.sh
```

### ะัะธะฑะบะฐ ะฟัะธ SSH ะฟะพะดะบะปััะตะฝะธะธ

**ะัะพะฑะปะตะผะฐ:** ะะต ัะดะฐะตััั ะฟะพะดะบะปััะธัััั ะบ ัะตัะฒะตัั

**ะะตัะตะฝะธะต:**
```bash
# ะัะพะฒะตัััะต ะดะพัััะฟะฝะพััั ัะตัะฒะตัะฐ
ping 217.151.231.96

# ะัะพะฒะตัััะต SSH ะบะปััะธ
ssh root@217.151.231.96 "echo OK"
```

---

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ            ะะะะะะฌะะะฏ ะะะะะะะะขะะ             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                             โ
โ  Telegram API                               โ
โ       โ                                     โ
โ  ะะพะบะฐะปัะฝัะน ะะพั (Docker)                     โ
โ       โ                                     โ
โ  http://host.docker.internal:8000/api       โ
โ       โ                                     โ
โ  ะะพะบะฐะปัะฝัะน Backend (Docker)                 โ
โ       โ                                     โ
โ  ะะพะบะฐะปัะฝะฐั PostgreSQL (Docker)              โ
โ                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ               PRODUCTION                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                             โ
โ  Telegram API                               โ
โ       โ                                     โ
โ  ะฃะดะฐะปะตะฝะฝัะน ะะพั (Docker ะฝะฐ ัะตัะฒะตัะต)          โ
โ       โ                                     โ
โ  http://backend:8000/api                    โ
โ       โ                                     โ
โ  Production Backend (Docker ะฝะฐ ัะตัะฒะตัะต)     โ
โ       โ                                     โ
โ  Production PostgreSQL (Docker ะฝะฐ ัะตัะฒะตัะต)  โ
โ  ะกะตัะฒะตั: 217.151.231.96                     โ
โ                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ Checklist

### ะะตัะตะด ะฝะฐัะฐะปะพะผ ัะฐะทัะฐะฑะพัะบะธ:
- [ ] ะะพะบะฐะปัะฝัะน backend ะทะฐะฟััะตะฝ (`docker-compose up -d backend db`)
- [ ] .env ัะฐะนะป ะฝะฐัััะพะตะฝ ั BOT_TOKEN
- [ ] ะะฐะฟััะตะฝ `./bot_switch_to_local.sh`
- [ ] ะะพั ะพัะฒะตัะฐะตั ะฝะฐ ัะตััะพะฒัะต ัะพะพะฑัะตะฝะธั

### ะะตัะตะด ะดะตะฟะปะพะตะผ:
- [ ] ะัะต ะธะทะผะตะฝะตะฝะธั ะฟัะพัะตััะธัะพะฒะฐะฝั ะปะพะบะฐะปัะฝะพ
- [ ] ะะพะด ะทะฐะบะพะผะผะธัะตะฝ
- [ ] ะะฐะฟััะตะฝ `./bot_switch_to_remote.sh`
- [ ] ะัะฟะพะปะฝะตะฝ `git push origin main`
- [ ] ะะฒัะพะดะตะฟะปะพะน ััะฟะตัะฝะพ ะทะฐะฒะตััะธะปัั

### ะะพัะปะต ะดะตะฟะปะพั:
- [ ] ะฃะดะฐะปะตะฝะฝัะน ะฑะพั ะทะฐะฟััะตะฝ
- [ ] ะะพั ะพัะฒะตัะฐะตั ะฝะฐ ัะพะพะฑัะตะฝะธั
- [ ] ะะพะณะธ ะฝะต ัะพะดะตัะถะฐั ะพัะธะฑะพะบ

---

**ะะพัะพะฒะพ ะบ ัะฐะฑะพัะต!** ๐

