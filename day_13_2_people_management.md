# –î–µ–Ω—å 13.2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–º–∏ (–ö–î, –ü—Ä–æ–¥—é—Å–µ—Ä—ã, –†–µ–∂–∏—Å—Å–µ—Ä—ã)

## üéØ –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–º–∏ (–ö–∞—Å—Ç–∏–Ω–≥-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∞, –ü—Ä–æ–¥—é—Å–µ—Ä—ã, –†–µ–∂–∏—Å—Å–µ—Ä—ã) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –µ–¥–∏–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ DRY –¥–ª—è –≤—Å–µ—Ö CRUD –æ–ø–µ—Ä–∞—Ü–∏–π.

## üìã –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

**–¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä—Å–æ–Ω:**
- –ö–æ–ª–æ–Ω–∫–∞ 1: –§–æ—Ç–æ –≤ –∫—Ä—É–∂–æ—á–∫–µ (–∞–≤–∞—Ç–∞—Ä)
- –ö–æ–ª–æ–Ω–∫–∞ 2: –§–ò–û (–ø–æ–ª–Ω–æ–µ)
- –ö–æ–ª–æ–Ω–∫–∞ 3: –ö–æ–Ω—Ç–∞–∫—Ç—ã (—Ç–µ–ª–µ—Ñ–æ–Ω, –¢–ì, –ø–æ—á—Ç–∞ - –¥—Ä—É–≥ –ø–æ–¥ –¥—Ä—É–≥–æ–º)
- –ö–æ–ª–æ–Ω–∫–∞ 4: –ü—Ä–æ–µ–∫—Ç—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5, –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º, –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ, –æ–±—Ä–µ–∑–∫–∞ –µ—Å–ª–∏ –±–æ–ª—å—à–µ 5)
- –ë–µ–∑ —à–∞–ø–∫–∏ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
- –ö–ª–∏–∫ –ø–æ —Å—Ç—Ä–æ–∫–µ ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

**–ù–∞–¥ —Ç–∞–±–ª–∏—Ü–µ–π:**
- –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –ö–î / –†–µ–∂–∏—Å—Å–µ—Ä–∞ / –ü—Ä–æ–¥—é—Å–µ—Ä–∞"
- –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ (–ø–æ –§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω—É, –ø–æ—á—Ç–µ, –¢–ì, –ø—Ä–æ–µ–∫—Ç–∞–º)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ –¥–∞—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, –§–ò–û, –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–æ–µ–∫—Ç–æ–≤)

**–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π –ø–µ—Ä—Å–æ–Ω—ã
- –ö–Ω–æ–ø–∫–∏: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å / –£–¥–∞–ª–∏—Ç—å / –ó–∞–∫—Ä—ã—Ç—å
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∞

**–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –§–æ—Ä–º–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏ –º–æ–¥–µ–ª–∏ Person
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- –ö–Ω–æ–ø–∫–∏: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å / –û—Ç–º–µ–Ω–∞

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ú–∞–ª–µ–Ω—å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω –≤ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ç–µ –∂–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω—ã —á–µ—Ä–µ–∑ —ç—Ç–∏ –∫–Ω–æ–ø–∫–∏ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ø–µ—Ä—Å–æ–Ω—ã

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **DRY –ø–æ–¥—Ö–æ–¥:** –ï–¥–∏–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- **–†–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –¢–µ –∂–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–µ—Ä—Å–æ–Ω
- **–ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:** –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∞ (created_by)
- **–¢–µ—Å—Ç—ã:** –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (unit + integration)
- **–ù–∏–∫–∞–∫–∏—Ö –ø–æ–ª–æ–º–æ–∫:** –ù–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### Backend (—É–∂–µ –µ—Å—Ç—å, –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è):

**–ú–æ–¥–µ–ª—å Person** (—É–∂–µ –µ—Å—Ç—å):
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è —É–∂–µ –µ—Å—Ç—å
- person_type: 'director', 'producer', 'casting_director'
- created_by –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞

**API endpoints** (—É–∂–µ –µ—Å—Ç—å):
- `GET /api/people/` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω
- `POST /api/people/` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã
- `GET /api/people/{id}/` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã
- `PUT /api/people/{id}/` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã
- `DELETE /api/people/{id}/` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã
- `GET /api/people/directors/` - —Å–ø–∏—Å–æ–∫ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤
- `GET /api/people/producers/` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤
- `GET /api/people/casting_directors/` - —Å–ø–∏—Å–æ–∫ –∫–∞—Å—Ç–∏–Ω–≥-–¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤
- `GET /api/people/search/?name=...&person_type=...` - –ø–æ–∏—Å–∫ –ø–µ—Ä—Å–æ–Ω

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- Endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–µ—Ä—Å–æ–Ω—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–æ–µ–∫—Ç–æ–≤ (–∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –≤ queryset)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ (–ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É, –ø–æ—á—Ç–µ, –¢–ì, –ø—Ä–æ–µ–∫—Ç–∞–º)

### Frontend (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å):

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
1. `CastingDirectorsPage.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Å—Ç–∏–Ω–≥-–¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤
2. `ProducersPage.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤
3. `DirectorsPage.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤

**–ï–¥–∏–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (DRY):**
1. `PersonTable.tsx` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–µ—Ä—Å–æ–Ω
2. `PersonModal.tsx` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (–ø—Ä–æ—Å–º–æ—Ç—Ä/—Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
3. `PersonForm.tsx` - —Ñ–æ—Ä–º–∞ –ø–µ—Ä—Å–æ–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ)
4. `PersonDeleteConfirm.tsx` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
5. `PersonSearchBar.tsx` - –ø–æ–∏—Å–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

**–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. `PersonAvatar.tsx` - –∞–≤–∞—Ç–∞—Ä –ø–µ—Ä—Å–æ–Ω—ã –≤ –∫—Ä—É–∂–æ—á–∫–µ
2. `PersonContacts.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
3. `PersonProjects.tsx` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–µ—Ä—Å–æ–Ω—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5)

**–°–µ—Ä–≤–∏—Å—ã:**
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `peopleService.ts` —Å –º–µ—Ç–æ–¥–∞–º–∏:
  - `getPersonProjects(id, limit=5)` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –ø–µ—Ä—Å–æ–Ω—ã
  - `searchPeople(query, filters, sort)` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
  - `deletePerson(id)` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã

**–¢–∏–ø—ã:**
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `types/people.ts` —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ –¥–ª—è —Ñ–æ—Ä–º –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

## üìÖ –ü–ª–∞–Ω –ø–æ—ç—Ç–∞–ø–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### **–≠—Ç–∞–ø 1: Backend API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** (1-2 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–µ—Ä—Å–æ–Ω—ã:**
   ```python
   # backend/people/views.py
   @action(detail=True, methods=['get'])
   def projects(self, request, pk=None):
       """–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –ø–µ—Ä—Å–æ–Ω—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5)"""
       person = self.get_object()
       limit = int(request.query_params.get('limit', 5))
       
       # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø–µ—Ä—Å–æ–Ω—ã
       if person.person_type == 'casting_director':
           projects = person.casting_projects.all()
       elif person.person_type == 'director':
           projects = person.directed_projects.all()
       elif person.person_type == 'producer':
           projects = person.produced_projects.all()
       
       projects = projects.order_by('-created_at')[:limit]
       serializer = ProjectListSerializer(projects, many=True)
       return Response(serializer.data)
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤:**
   ```python
   # backend/people/views.py
   from django.db.models import Count, Q
   
   def get_queryset(self):
       queryset = super().get_queryset()
       
       # –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
       queryset = queryset.annotate(
           projects_count=Count('casting_projects') + 
                         Count('directed_projects') + 
                         Count('produced_projects')
       )
       
       return queryset
   ```

3. **–†–∞—Å—à–∏—Ä–∏—Ç—å –º–µ—Ç–æ–¥ search –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞:**
   ```python
   @action(detail=False, methods=['get'])
   def search(self, request):
       """–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–µ—Ä—Å–æ–Ω"""
       queryset = self.get_queryset()
       
       # –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
       name = request.query_params.get('name')
       if name:
           queryset = queryset.filter(
               Q(first_name__icontains=name) |
               Q(last_name__icontains=name) |
               Q(middle_name__icontains=name)
           )
       
       # –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º
       phone = request.query_params.get('phone')
       if phone:
           queryset = queryset.filter(phone__icontains=phone)
       
       email = request.query_params.get('email')
       if email:
           queryset = queryset.filter(email__icontains=email)
       
       telegram = request.query_params.get('telegram')
       if telegram:
           queryset = queryset.filter(telegram_username__icontains=telegram)
       
       # –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
       project = request.query_params.get('project')
       if project:
           queryset = queryset.filter(
               Q(casting_projects__title__icontains=project) |
               Q(directed_projects__title__icontains=project) |
               Q(produced_projects__title__icontains=project)
           ).distinct()
       
       # –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É
       person_type = request.query_params.get('person_type')
       if person_type:
           queryset = queryset.filter(person_type=person_type)
       
       # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
       sort_by = request.query_params.get('sort', '-created_at')
       if sort_by == 'projects_count':
           queryset = queryset.order_by('-projects_count')
       elif sort_by == 'full_name':
           queryset = queryset.order_by('last_name', 'first_name')
       else:
           queryset = queryset.order_by(sort_by)
       
       serializer = self.get_serializer(queryset, many=True)
       return Response(serializer.data)
   ```

4. **–û–±–Ω–æ–≤–∏—Ç—å PersonSerializer –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è projects_count:**
   ```python
   # backend/people/serializers.py
   class PersonSerializer(serializers.ModelSerializer):
       projects_count = serializers.IntegerField(read_only=True)
       recent_projects = serializers.SerializerMethodField()
       
       def get_recent_projects(self, obj):
           # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –ø—Ä–æ–µ–∫—Ç–æ–≤
           projects = []
           if obj.person_type == 'casting_director':
               projects = obj.casting_projects.all()
           elif obj.person_type == 'director':
               projects = obj.directed_projects.all()
           elif obj.person_type == 'producer':
               projects = obj.produced_projects.all()
           
           projects = projects.order_by('-created_at')[:5]
           return [{'id': p.id, 'title': p.title, 'created_at': p.created_at} for p in projects]
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 1:**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API —á–µ—Ä–µ–∑ curl/Postman
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è projects_count —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ –≤—Å–µ–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º

---

### **–≠—Ç–∞–ø 2: Frontend - –°–µ—Ä–≤–∏—Å—ã –∏ —Ç–∏–ø—ã** (1 —á–∞—Å)

**–ó–∞–¥–∞—á–∏:**

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å `types/people.ts`:**
   ```typescript
   // frontend/src/types/people.ts
   
   export interface PersonProject {
     id: number;
     title: string;
     created_at: string;
   }
   
   export interface Person {
     id: number;
     person_type: 'director' | 'producer' | 'casting_director';
     first_name: string;
     last_name: string;
     middle_name?: string;
     full_name: string;
     short_name: string;
     photo?: string;
     bio?: string;
     birth_date?: string;
     nationality?: string;
     phone?: string;
     email?: string;
     website?: string;
     telegram_username?: string;
     kinopoisk_url?: string;
     social_media?: Record<string, string>;
     awards?: string;
     is_active: boolean;
     created_by: string;
     created_at: string;
     updated_at: string;
     projects_count?: number;
     recent_projects?: PersonProject[];
   }
   
   export interface PersonFormData {
     person_type: 'director' | 'producer' | 'casting_director';
     first_name: string;
     last_name: string;
     middle_name?: string;
     photo?: File | null;
     bio?: string;
     birth_date?: string;
     nationality?: string;
     phone?: string;
     email?: string;
     website?: string;
     telegram_username?: string;
     kinopoisk_url?: string;
     social_media?: Record<string, string>;
     awards?: string;
   }
   
   export interface PersonSearchParams {
     name?: string;
     phone?: string;
     email?: string;
     telegram?: string;
     project?: string;
     person_type?: 'director' | 'producer' | 'casting_director';
     sort?: 'created_at' | '-created_at' | 'full_name' | 'projects_count';
   }
   
   export type PersonModalMode = 'view' | 'create' | 'edit';
   ```

2. **–†–∞—Å—à–∏—Ä–∏—Ç—å `services/people.ts`:**
   ```typescript
   // frontend/src/services/people.ts
   import api from './api';
   import { Person, PersonFormData, PersonSearchParams } from '../types/people';
   
   export const peopleService = {
     // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã...
     
     // –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω—É –ø–æ ID
     async getPersonById(id: number): Promise<Person> {
       const response = await api.get(`/people/${id}/`);
       return response.data;
     },
     
     // –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –ø–µ—Ä—Å–æ–Ω—ã
     async getPersonProjects(id: number, limit: number = 5): Promise<PersonProject[]> {
       const response = await api.get(`/people/${id}/projects/`, {
         params: { limit }
       });
       return response.data;
     },
     
     // –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω—É
     async createPerson(data: PersonFormData): Promise<Person> {
       const formData = new FormData();
       
       Object.entries(data).forEach(([key, value]) => {
         if (value !== undefined && value !== null) {
           if (key === 'photo' && value instanceof File) {
             formData.append(key, value);
           } else if (key === 'social_media') {
             formData.append(key, JSON.stringify(value));
           } else {
             formData.append(key, String(value));
           }
         }
       });
       
       const response = await api.post('/people/', formData, {
         headers: { 'Content-Type': 'multipart/form-data' }
       });
       return response.data;
     },
     
     // –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω—É
     async updatePerson(id: number, data: Partial<PersonFormData>): Promise<Person> {
       const formData = new FormData();
       
       Object.entries(data).forEach(([key, value]) => {
         if (value !== undefined && value !== null) {
           if (key === 'photo' && value instanceof File) {
             formData.append(key, value);
           } else if (key === 'social_media') {
             formData.append(key, JSON.stringify(value));
           } else {
             formData.append(key, String(value));
           }
         }
       });
       
       const response = await api.put(`/people/${id}/`, formData, {
         headers: { 'Content-Type': 'multipart/form-data' }
       });
       return response.data;
     },
     
     // –£–¥–∞–ª–∏—Ç—å –ø–µ—Ä—Å–æ–Ω—É
     async deletePerson(id: number): Promise<void> {
       await api.delete(`/people/${id}/`);
     },
     
     // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
     async searchPeople(params: PersonSearchParams): Promise<Person[]> {
       const response = await api.get('/people/search/', { params });
       return response.data;
     },
     
     // –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω –ø–æ —Ç–∏–ø—É
     async getByType(personType: 'director' | 'producer' | 'casting_director'): Promise<Person[]> {
       const response = await api.get(`/people/${personType}s/`);
       return response.data;
     }
   };
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 2:**
- [ ] –°–æ–∑–¥–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è peopleService
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ TypeScript
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞ —Å mock –¥–∞–Ω–Ω—ã–º–∏

---

### **–≠—Ç–∞–ø 3: Frontend - –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** (2-3 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. **–°–æ–∑–¥–∞—Ç—å `PersonAvatar.tsx`:**
   ```typescript
   // frontend/src/components/people/PersonAvatar.tsx
   import React from 'react';
   
   interface PersonAvatarProps {
     photo?: string;
     fullName: string;
     size?: 'sm' | 'md' | 'lg';
   }
   
   export const PersonAvatar: React.FC<PersonAvatarProps> = ({ 
     photo, 
     fullName,
     size = 'md' 
   }) => {
     const sizeClasses = {
       sm: 'w-8 h-8 text-xs',
       md: 'w-12 h-12 text-sm',
       lg: 'w-16 h-16 text-base'
     };
     
     const initials = fullName
       .split(' ')
       .map(word => word[0])
       .join('')
       .toUpperCase()
       .slice(0, 2);
     
     return (
       <div className={`${sizeClasses[size]} rounded-full overflow-hidden bg-gray-200 flex items-center justify-center`}>
         {photo ? (
           <img 
             src={photo} 
             alt={fullName}
             className="w-full h-full object-cover"
           />
         ) : (
           <span className="font-medium text-gray-600">{initials}</span>
         )}
       </div>
     );
   };
   ```

2. **–°–æ–∑–¥–∞—Ç—å `PersonContacts.tsx`:**
   ```typescript
   // frontend/src/components/people/PersonContacts.tsx
   import React from 'react';
   
   interface PersonContactsProps {
     phone?: string;
     email?: string;
     telegram?: string;
   }
   
   export const PersonContacts: React.FC<PersonContactsProps> = ({
     phone,
     email,
     telegram
   }) => {
     return (
       <div className="flex flex-col space-y-1 text-sm text-gray-600">
         {phone && (
           <div className="flex items-center space-x-1">
             <span>üìû</span>
             <a href={`tel:${phone}`} className="hover:text-blue-600">
               {phone}
             </a>
           </div>
         )}
         {telegram && (
           <div className="flex items-center space-x-1">
             <span>‚úàÔ∏è</span>
             <a 
               href={`https://t.me/${telegram.replace('@', '')}`}
               target="_blank"
               rel="noopener noreferrer"
               className="hover:text-blue-600"
             >
               {telegram}
             </a>
           </div>
         )}
         {email && (
           <div className="flex items-center space-x-1">
             <span>üìß</span>
             <a href={`mailto:${email}`} className="hover:text-blue-600">
               {email}
             </a>
           </div>
         )}
       </div>
     );
   };
   ```

3. **–°–æ–∑–¥–∞—Ç—å `PersonProjects.tsx`:**
   ```typescript
   // frontend/src/components/people/PersonProjects.tsx
   import React from 'react';
   import { Link } from 'react-router-dom';
   import { PersonProject } from '../../types/people';
   
   interface PersonProjectsProps {
     projects: PersonProject[];
     maxVisible?: number;
   }
   
   export const PersonProjects: React.FC<PersonProjectsProps> = ({ 
     projects,
     maxVisible = 5
   }) => {
     const visibleProjects = projects.slice(0, maxVisible);
     const hiddenCount = projects.length - maxVisible;
     
     return (
       <div className="flex flex-col space-y-1">
         {visibleProjects.map(project => (
           <Link
             key={project.id}
             to={`/projects/${project.id}`}
             className="text-sm text-blue-600 hover:text-blue-800 hover:underline"
           >
             {project.title}
           </Link>
         ))}
         {hiddenCount > 0 && (
           <span className="text-xs text-gray-500 italic">
             +{hiddenCount} –µ—â–µ...
           </span>
         )}
         {projects.length === 0 && (
           <span className="text-sm text-gray-400 italic">
             –ù–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤
           </span>
         )}
       </div>
     );
   };
   ```

4. **–°–æ–∑–¥–∞—Ç—å `PersonSearchBar.tsx`:**
   ```typescript
   // frontend/src/components/people/PersonSearchBar.tsx
   import React, { useState } from 'react';
   import { PersonSearchParams } from '../../types/people';
   
   interface PersonSearchBarProps {
     onSearch: (params: PersonSearchParams) => void;
     personType: 'director' | 'producer' | 'casting_director';
   }
   
   export const PersonSearchBar: React.FC<PersonSearchBarProps> = ({
     onSearch,
     personType
   }) => {
     const [searchQuery, setSearchQuery] = useState('');
     const [sortBy, setSortBy] = useState<'-created_at' | 'full_name' | 'projects_count'>('-created_at');
     
     const handleSearch = () => {
       onSearch({
         name: searchQuery,
         person_type: personType,
         sort: sortBy
       });
     };
     
     const handleSortChange = (newSort: '-created_at' | 'full_name' | 'projects_count') => {
       setSortBy(newSort);
       onSearch({
         name: searchQuery,
         person_type: personType,
         sort: newSort
       });
     };
     
     return (
       <div className="flex items-center space-x-4 mb-6">
         {/* –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ */}
         <div className="flex-1 relative">
           <input
             type="text"
             value={searchQuery}
             onChange={(e) => setSearchQuery(e.target.value)}
             onKeyPress={(e) => e.key === 'Enter' && handleSearch()}
             placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω—É, –ø–æ—á—Ç–µ, –¢–ì, –ø—Ä–æ–µ–∫—Ç–∞–º..."
             className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
           />
           <button
             onClick={handleSearch}
             className="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
           >
             üîç
           </button>
         </div>
         
         {/* –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ */}
         <div className="flex items-center space-x-2">
           <span className="text-sm text-gray-600">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</span>
           <select
             value={sortBy}
             onChange={(e) => handleSortChange(e.target.value as any)}
             className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
           >
             <option value="-created_at">–ü–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ)</option>
             <option value="full_name">–ü–æ –§–ò–û (–ê-–Ø)</option>
             <option value="projects_count">–ü–æ –∫–æ–ª-–≤—É –ø—Ä–æ–µ–∫—Ç–æ–≤</option>
           </select>
         </div>
       </div>
     );
   };
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 3:**
- [ ] –°–æ–∑–¥–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–∫–ª–∏–∫–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è)

---

### **–≠—Ç–∞–ø 4: Frontend - –§–æ—Ä–º–∞ –ø–µ—Ä—Å–æ–Ω—ã** (2-3 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. **–°–æ–∑–¥–∞—Ç—å `PersonForm.tsx`:**
   ```typescript
   // frontend/src/components/people/PersonForm.tsx
   import React, { useState, useEffect } from 'react';
   import { Person, PersonFormData } from '../../types/people';
   
   interface PersonFormProps {
     initialData?: Person;
     personType: 'director' | 'producer' | 'casting_director';
     onSubmit: (data: PersonFormData) => void;
     onCancel: () => void;
     mode: 'create' | 'edit';
   }
   
   export const PersonForm: React.FC<PersonFormProps> = ({
     initialData,
     personType,
     onSubmit,
     onCancel,
     mode
   }) => {
     const [formData, setFormData] = useState<PersonFormData>({
       person_type: personType,
       first_name: initialData?.first_name || '',
       last_name: initialData?.last_name || '',
       middle_name: initialData?.middle_name || '',
       phone: initialData?.phone || '',
       email: initialData?.email || '',
       telegram_username: initialData?.telegram_username || '',
       bio: initialData?.bio || '',
       birth_date: initialData?.birth_date || '',
       nationality: initialData?.nationality || '',
       website: initialData?.website || '',
       kinopoisk_url: initialData?.kinopoisk_url || '',
       awards: initialData?.awards || '',
       social_media: initialData?.social_media || {}
     });
     
     const [photoPreview, setPhotoPreview] = useState<string | null>(
       initialData?.photo || null
     );
     
     const handleInputChange = (
       e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>
     ) => {
       const { name, value } = e.target;
       setFormData(prev => ({ ...prev, [name]: value }));
     };
     
     const handlePhotoChange = (e: React.ChangeEvent<HTMLInputElement>) => {
       const file = e.target.files?.[0];
       if (file) {
         setFormData(prev => ({ ...prev, photo: file }));
         const reader = new FileReader();
         reader.onloadend = () => {
           setPhotoPreview(reader.result as string);
         };
         reader.readAsDataURL(file);
       }
     };
     
     const handleSubmit = (e: React.FormEvent) => {
       e.preventDefault();
       onSubmit(formData);
     };
     
     const getPersonTypeLabel = () => {
       const labels = {
         director: '–†–µ–∂–∏—Å—Å–µ—Ä–∞',
         producer: '–ü—Ä–æ–¥—é—Å–µ—Ä–∞',
         casting_director: '–ö–∞—Å—Ç–∏–Ω–≥-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∞'
       };
       return labels[personType];
     };
     
     return (
       <form onSubmit={handleSubmit} className="space-y-6">
         <div className="text-center mb-4">
           <h2 className="text-2xl font-bold text-gray-900">
             {mode === 'create' ? `–°–æ–∑–¥–∞—Ç—å ${getPersonTypeLabel()}` : `–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ${getPersonTypeLabel()}`}
           </h2>
         </div>
         
         {/* –§–æ—Ç–æ */}
         <div className="flex flex-col items-center">
           <label className="block text-sm font-medium text-gray-700 mb-2">
             –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è
           </label>
           <div className="w-32 h-32 rounded-full overflow-hidden bg-gray-200 mb-2">
             {photoPreview ? (
               <img src={photoPreview} alt="–ü—Ä–µ–≤—å—é" className="w-full h-full object-cover" />
             ) : (
               <div className="w-full h-full flex items-center justify-center text-gray-400">
                 –ù–µ—Ç —Ñ–æ—Ç–æ
               </div>
             )}
           </div>
           <input
             type="file"
             accept="image/*"
             onChange={handlePhotoChange}
             className="text-sm"
           />
         </div>
         
         {/* –§–ò–û */}
         <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               –§–∞–º–∏–ª–∏—è *
             </label>
             <input
               type="text"
               name="last_name"
               value={formData.last_name}
               onChange={handleInputChange}
               required
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               –ò–º—è *
             </label>
             <input
               type="text"
               name="first_name"
               value={formData.first_name}
               onChange={handleInputChange}
               required
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               –û—Ç—á–µ—Å—Ç–≤–æ
             </label>
             <input
               type="text"
               name="middle_name"
               value={formData.middle_name}
               onChange={handleInputChange}
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
         </div>
         
         {/* –ö–æ–Ω—Ç–∞–∫—Ç—ã */}
         <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               –¢–µ–ª–µ—Ñ–æ–Ω
             </label>
             <input
               type="tel"
               name="phone"
               value={formData.phone}
               onChange={handleInputChange}
               placeholder="+7 (999) 123-45-67"
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               Email
             </label>
             <input
               type="email"
               name="email"
               value={formData.email}
               onChange={handleInputChange}
               placeholder="email@example.com"
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               Telegram
             </label>
             <input
               type="text"
               name="telegram_username"
               value={formData.telegram_username}
               onChange={handleInputChange}
               placeholder="@username"
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
         </div>
         
         {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è */}
         <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
             </label>
             <input
               type="date"
               name="birth_date"
               value={formData.birth_date}
               onChange={handleInputChange}
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
             </label>
             <input
               type="text"
               name="nationality"
               value={formData.nationality}
               onChange={handleInputChange}
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
         </div>
         
         {/* –°—Å—ã–ª–∫–∏ */}
         <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               –õ–∏—á–Ω—ã–π —Å–∞–π—Ç
             </label>
             <input
               type="url"
               name="website"
               value={formData.website}
               onChange={handleInputChange}
               placeholder="https://example.com"
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
           <div>
             <label className="block text-sm font-medium text-gray-700 mb-1">
               –ö–∏–Ω–æ–ø–æ–∏—Å–∫
             </label>
             <input
               type="url"
               name="kinopoisk_url"
               value={formData.kinopoisk_url}
               onChange={handleInputChange}
               placeholder="https://kinopoisk.ru/..."
               className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
             />
           </div>
         </div>
         
         {/* –ë–∏–æ–≥—Ä–∞—Ñ–∏—è */}
         <div>
           <label className="block text-sm font-medium text-gray-700 mb-1">
             –ë–∏–æ–≥—Ä–∞—Ñ–∏—è
           </label>
           <textarea
             name="bio"
             value={formData.bio}
             onChange={handleInputChange}
             rows={4}
             className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
           />
         </div>
         
         {/* –ù–∞–≥—Ä–∞–¥—ã */}
         <div>
           <label className="block text-sm font-medium text-gray-700 mb-1">
             –ù–∞–≥—Ä–∞–¥—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
           </label>
           <textarea
             name="awards"
             value={formData.awards}
             onChange={handleInputChange}
             rows={3}
             className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
           />
         </div>
         
         {/* –ö–Ω–æ–ø–∫–∏ */}
         <div className="flex justify-end space-x-4 pt-4 border-t">
           <button
             type="button"
             onClick={onCancel}
             className="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
           >
             –û—Ç–º–µ–Ω–∞
           </button>
           <button
             type="submit"
             className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
           >
             {mode === 'create' ? '–°–æ–∑–¥–∞—Ç—å' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'}
           </button>
         </div>
       </form>
     );
   };
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 4:**
- [ ] –°–æ–∑–¥–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è PersonForm
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–ª–µ–π
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö

---

### **–≠—Ç–∞–ø 5: Frontend - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ** (2 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. **–°–æ–∑–¥–∞—Ç—å `PersonModal.tsx`:**
   ```typescript
   // frontend/src/components/people/PersonModal.tsx
   import React, { useState, useEffect } from 'react';
   import { Person, PersonFormData, PersonModalMode } from '../../types/people';
   import { PersonForm } from './PersonForm';
   import { PersonAvatar } from './PersonAvatar';
   import { PersonContacts } from './PersonContacts';
   import { PersonProjects } from './PersonProjects';
   import { peopleService } from '../../services/people';
   import { useAuth } from '../../contexts/AuthContext';
   
   interface PersonModalProps {
     isOpen: boolean;
     onClose: () => void;
     personId?: number;
     personType: 'director' | 'producer' | 'casting_director';
     mode: PersonModalMode;
     onSuccess?: (person: Person) => void;
   }
   
   export const PersonModal: React.FC<PersonModalProps> = ({
     isOpen,
     onClose,
     personId,
     personType,
     mode: initialMode,
     onSuccess
   }) => {
     const { user } = useAuth();
     const [mode, setMode] = useState<PersonModalMode>(initialMode);
     const [person, setPerson] = useState<Person | null>(null);
     const [loading, setLoading] = useState(false);
     const [error, setError] = useState<string | null>(null);
     const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
     
     useEffect(() => {
       if (isOpen && personId && mode !== 'create') {
         loadPerson();
       }
     }, [isOpen, personId, mode]);
     
     const loadPerson = async () => {
       if (!personId) return;
       
       setLoading(true);
       try {
         const data = await peopleService.getPersonById(personId);
         setPerson(data);
       } catch (err) {
         setError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');
       } finally {
         setLoading(false);
       }
     };
     
     const handleSubmit = async (data: PersonFormData) => {
       setLoading(true);
       setError(null);
       
       try {
         let result: Person;
         if (mode === 'create') {
           result = await peopleService.createPerson(data);
         } else {
           result = await peopleService.updatePerson(personId!, data);
         }
         
         onSuccess?.(result);
         onClose();
       } catch (err: any) {
         setError(err.response?.data?.message || '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
       } finally {
         setLoading(false);
       }
     };
     
     const handleDelete = async () => {
       if (!personId) return;
       
       setLoading(true);
       try {
         await peopleService.deletePerson(personId);
         onSuccess?.(null as any); // Notify parent to refresh
         onClose();
       } catch (err: any) {
         setError(err.response?.data?.message || '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è');
       } finally {
         setLoading(false);
         setShowDeleteConfirm(false);
       }
     };
     
     const canEdit = person && user && person.created_by === user.username;
     
     if (!isOpen) return null;
     
     return (
       <div className="fixed inset-0 z-50 overflow-y-auto">
         <div className="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
           {/* Overlay */}
           <div 
             className="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"
             onClick={onClose}
           />
           
           {/* Modal */}
           <div className="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full">
             {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è */}
             <div className="absolute top-4 right-4">
               <button
                 onClick={onClose}
                 className="text-gray-400 hover:text-gray-600"
               >
                 <span className="text-2xl">√ó</span>
               </button>
             </div>
             
             <div className="p-6">
               {loading && (
                 <div className="text-center py-8">
                   <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div>
                   <p className="mt-4 text-gray-600">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                 </div>
               )}
               
               {error && (
                 <div className="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
                   <p className="text-red-800">{error}</p>
                 </div>
               )}
               
               {!loading && (mode === 'create' || mode === 'edit') && (
                 <PersonForm
                   initialData={person || undefined}
                   personType={personType}
                   onSubmit={handleSubmit}
                   onCancel={onClose}
                   mode={mode}
                 />
               )}
               
               {!loading && mode === 'view' && person && (
                 <div className="space-y-6">
                   {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
                   <div className="text-center border-b pb-4">
                     <PersonAvatar 
                       photo={person.photo} 
                       fullName={person.full_name}
                       size="lg"
                     />
                     <h2 className="text-2xl font-bold text-gray-900 mt-4">
                       {person.full_name}
                     </h2>
                     <p className="text-gray-600">
                       {person.person_type === 'director' && '–†–µ–∂–∏—Å—Å–µ—Ä'}
                       {person.person_type === 'producer' && '–ü—Ä–æ–¥—é—Å–µ—Ä'}
                       {person.person_type === 'casting_director' && '–ö–∞—Å—Ç–∏–Ω–≥-–¥–∏—Ä–µ–∫—Ç–æ—Ä'}
                     </p>
                   </div>
                   
                   {/* –ö–æ–Ω—Ç–∞–∫—Ç—ã */}
                   <div>
                     <h3 className="text-lg font-semibold mb-2">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                     <PersonContacts
                       phone={person.phone}
                       email={person.email}
                       telegram={person.telegram_username}
                     />
                   </div>
                   
                   {/* –ü—Ä–æ–µ–∫—Ç—ã */}
                   {person.recent_projects && person.recent_projects.length > 0 && (
                     <div>
                       <h3 className="text-lg font-semibold mb-2">
                         –ü—Ä–æ–µ–∫—Ç—ã ({person.projects_count})
                       </h3>
                       <PersonProjects projects={person.recent_projects} />
                     </div>
                   )}
                   
                   {/* –ë–∏–æ–≥—Ä–∞—Ñ–∏—è */}
                   {person.bio && (
                     <div>
                       <h3 className="text-lg font-semibold mb-2">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</h3>
                       <p className="text-gray-700 whitespace-pre-line">{person.bio}</p>
                     </div>
                   )}
                   
                   {/* –ù–∞–≥—Ä–∞–¥—ã */}
                   {person.awards && (
                     <div>
                       <h3 className="text-lg font-semibold mb-2">–ù–∞–≥—Ä–∞–¥—ã</h3>
                       <p className="text-gray-700 whitespace-pre-line">{person.awards}</p>
                     </div>
                   )}
                   
                   {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
                   <div className="grid grid-cols-2 gap-4 text-sm">
                     {person.birth_date && (
                       <div>
                         <p className="text-gray-600">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</p>
                         <p className="font-medium">{person.birth_date}</p>
                       </div>
                     )}
                     {person.nationality && (
                       <div>
                         <p className="text-gray-600">–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:</p>
                         <p className="font-medium">{person.nationality}</p>
                       </div>
                     )}
                     {person.website && (
                       <div>
                         <p className="text-gray-600">–°–∞–π—Ç:</p>
                         <a 
                           href={person.website}
                           target="_blank"
                           rel="noopener noreferrer"
                           className="text-blue-600 hover:underline"
                         >
                           –ü–µ—Ä–µ–π—Ç–∏
                         </a>
                       </div>
                     )}
                     {person.kinopoisk_url && (
                       <div>
                         <p className="text-gray-600">–ö–∏–Ω–æ–ø–æ–∏—Å–∫:</p>
                         <a 
                           href={person.kinopoisk_url}
                           target="_blank"
                           rel="noopener noreferrer"
                           className="text-blue-600 hover:underline"
                         >
                           –ü–µ—Ä–µ–π—Ç–∏
                         </a>
                       </div>
                     )}
                   </div>
                   
                   {/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */}
                   <div className="flex justify-end space-x-4 pt-4 border-t">
                     {canEdit && !showDeleteConfirm && (
                       <>
                         <button
                           onClick={() => setMode('edit')}
                           className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                         >
                           –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                         </button>
                         <button
                           onClick={() => setShowDeleteConfirm(true)}
                           className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"
                         >
                           –£–¥–∞–ª–∏—Ç—å
                         </button>
                       </>
                     )}
                     {showDeleteConfirm && (
                       <div className="w-full bg-red-50 border border-red-200 rounded-lg p-4">
                         <p className="text-red-800 mb-4">
                           –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –ø–µ—Ä—Å–æ–Ω—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.
                         </p>
                         <div className="flex justify-end space-x-2">
                           <button
                             onClick={() => setShowDeleteConfirm(false)}
                             className="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
                           >
                             –û—Ç–º–µ–Ω–∞
                           </button>
                           <button
                             onClick={handleDelete}
                             className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"
                           >
                             –î–∞, —É–¥–∞–ª–∏—Ç—å
                           </button>
                         </div>
                       </div>
                     )}
                     <button
                       onClick={onClose}
                       className="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
                     >
                       –ó–∞–∫—Ä—ã—Ç—å
                     </button>
                   </div>
                 </div>
               )}
             </div>
           </div>
         </div>
       </div>
     );
   };
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 5:**
- [ ] –°–æ–∑–¥–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è PersonModal
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ä–µ–∂–∏–º—ã (view, create, edit)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∞)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º

---

### **–≠—Ç–∞–ø 6: Frontend - –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä—Å–æ–Ω** (2-3 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. **–°–æ–∑–¥–∞—Ç—å `PersonTable.tsx`:**
   ```typescript
   // frontend/src/components/people/PersonTable.tsx
   import React, { useState, useEffect } from 'react';
   import { Person, PersonSearchParams } from '../../types/people';
   import { PersonAvatar } from './PersonAvatar';
   import { PersonContacts } from './PersonContacts';
   import { PersonProjects } from './PersonProjects';
   import { peopleService } from '../../services/people';
   import { PersonSearchBar } from './PersonSearchBar';
   import { PersonModal } from './PersonModal';
   
   interface PersonTableProps {
     personType: 'director' | 'producer' | 'casting_director';
   }
   
   export const PersonTable: React.FC<PersonTableProps> = ({ personType }) => {
     const [people, setPeople] = useState<Person[]>([]);
     const [loading, setLoading] = useState(false);
     const [modalOpen, setModalOpen] = useState(false);
     const [selectedPersonId, setSelectedPersonId] = useState<number | undefined>();
     const [modalMode, setModalMode] = useState<'view' | 'create' | 'edit'>('view');
     
     useEffect(() => {
       loadPeople();
     }, [personType]);
     
     const loadPeople = async (searchParams?: PersonSearchParams) => {
       setLoading(true);
       try {
         const data = await peopleService.searchPeople({
           person_type: personType,
           sort: '-created_at',
           ...searchParams
         });
         setPeople(data);
       } catch (error) {
         console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä—Å–æ–Ω:', error);
       } finally {
         setLoading(false);
       }
     };
     
     const handleRowClick = (person: Person) => {
       setSelectedPersonId(person.id);
       setModalMode('view');
       setModalOpen(true);
     };
     
     const handleCreateNew = () => {
       setSelectedPersonId(undefined);
       setModalMode('create');
       setModalOpen(true);
     };
     
     const handleModalSuccess = () => {
       loadPeople();
     };
     
     const getPersonTypeLabel = () => {
       const labels = {
         director: '–†–µ–∂–∏—Å—Å–µ—Ä–∞',
         producer: '–ü—Ä–æ–¥—é—Å–µ—Ä–∞',
         casting_director: '–ö–∞—Å—Ç–∏–Ω–≥-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∞'
       };
       return labels[personType];
     };
     
     return (
       <div className="space-y-6">
         {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è */}
         <div className="flex items-center justify-between">
           <button
             onClick={handleCreateNew}
             className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium"
           >
             + –°–æ–∑–¥–∞—Ç—å {getPersonTypeLabel()}
           </button>
         </div>
         
         {/* –ü–æ–∏—Å–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ */}
         <PersonSearchBar
           personType={personType}
           onSearch={loadPeople}
         />
         
         {/* –¢–∞–±–ª–∏—Ü–∞ */}
         {loading ? (
           <div className="text-center py-12">
             <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div>
             <p className="mt-4 text-gray-600">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
           </div>
         ) : people.length === 0 ? (
           <div className="text-center py-12 bg-gray-50 rounded-lg">
             <p className="text-gray-600">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>
           </div>
         ) : (
           <div className="space-y-2">
             {people.map(person => (
               <div
                 key={person.id}
                 onClick={() => handleRowClick(person)}
                 className="flex items-center space-x-4 p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md cursor-pointer transition-all"
               >
                 {/* –ö–æ–ª–æ–Ω–∫–∞ 1: –§–æ—Ç–æ */}
                 <div className="flex-shrink-0">
                   <PersonAvatar 
                     photo={person.photo}
                     fullName={person.full_name}
                     size="md"
                   />
                 </div>
                 
                 {/* –ö–æ–ª–æ–Ω–∫–∞ 2: –§–ò–û */}
                 <div className="flex-1 min-w-0">
                   <p className="text-base font-medium text-gray-900 truncate">
                     {person.full_name}
                   </p>
                   {person.nationality && (
                     <p className="text-sm text-gray-500">{person.nationality}</p>
                   )}
                 </div>
                 
                 {/* –ö–æ–ª–æ–Ω–∫–∞ 3: –ö–æ–Ω—Ç–∞–∫—Ç—ã */}
                 <div className="flex-1">
                   <PersonContacts
                     phone={person.phone}
                     email={person.email}
                     telegram={person.telegram_username}
                   />
                 </div>
                 
                 {/* –ö–æ–ª–æ–Ω–∫–∞ 4: –ü—Ä–æ–µ–∫—Ç—ã */}
                 <div className="flex-1">
                   <PersonProjects projects={person.recent_projects || []} />
                 </div>
               </div>
             ))}
           </div>
         )}
         
         {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */}
         <PersonModal
           isOpen={modalOpen}
           onClose={() => setModalOpen(false)}
           personId={selectedPersonId}
           personType={personType}
           mode={modalMode}
           onSuccess={handleModalSuccess}
         />
       </div>
     );
   };
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 6:**
- [ ] –°–æ–∑–¥–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è PersonTable
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–æ–∫
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–∫ –ø–æ —Å—Ç—Ä–æ–∫–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø–µ—Ä—Å–æ–Ω—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

### **–≠—Ç–∞–ø 7: Frontend - –°—Ç—Ä–∞–Ω–∏—Ü—ã** (1 —á–∞—Å)

**–ó–∞–¥–∞—á–∏:**

1. **–°–æ–∑–¥–∞—Ç—å `CastingDirectorsPage.tsx`:**
   ```typescript
   // frontend/src/pages/CastingDirectors.tsx
   import React from 'react';
   import { PersonTable } from '../components/people/PersonTable';
   
   const CastingDirectors: React.FC = () => {
     return (
       <div className="container mx-auto px-4 py-6">
         <PersonTable personType="casting_director" />
       </div>
     );
   };
   
   export default CastingDirectors;
   ```

2. **–°–æ–∑–¥–∞—Ç—å `ProducersPage.tsx`:**
   ```typescript
   // frontend/src/pages/Producers.tsx
   import React from 'react';
   import { PersonTable } from '../components/people/PersonTable';
   
   const Producers: React.FC = () => {
     return (
       <div className="container mx-auto px-4 py-6">
         <PersonTable personType="producer" />
       </div>
     );
   };
   
   export default Producers;
   ```

3. **–°–æ–∑–¥–∞—Ç—å `DirectorsPage.tsx`:**
   ```typescript
   // frontend/src/pages/Directors.tsx
   import React from 'react';
   import { PersonTable } from '../components/people/PersonTable';
   
   const Directors: React.FC = () => {
     return (
       <div className="container mx-auto px-4 py-6">
         <PersonTable personType="director" />
       </div>
     );
   };
   
   export default Directors;
   ```

4. **–û–±–Ω–æ–≤–∏—Ç—å `App.tsx` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü:**
   ```typescript
   // frontend/src/App.tsx
   import CastingDirectors from './pages/CastingDirectors';
   import Producers from './pages/Producers';
   import Directors from './pages/Directors';
   
   // ...
   
   <Route
     path="/casting-directors"
     element={
       <ProtectedRoute>
         <Layout>
           <CastingDirectors />
         </Layout>
       </ProtectedRoute>
     }
   />
   
   <Route
     path="/persons/producers"
     element={
       <ProtectedRoute>
         <Layout>
           <Producers />
         </Layout>
       </ProtectedRoute>
     }
   />
   
   <Route
     path="/persons/directors"
     element={
       <ProtectedRoute>
         <Layout>
           <Directors />
         </Layout>
       </ProtectedRoute>
     }
   />
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 7:**
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –ø–µ—Ä—Å–æ–Ω

---

### **–≠—Ç–∞–ø 8: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–æ—Ä–º–æ–π —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞** (2 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. **–û–±–Ω–æ–≤–∏—Ç—å `TeamMemberSelector.tsx` –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞:**
   ```typescript
   // frontend/src/components/projects/creation/TeamMemberSelector.tsx
   import { PersonModal } from '../../people/PersonModal';
   
   export const TeamMemberSelector: React.FC<TeamMemberSelectorProps> = ({
     // ... props
   }) => {
     const [showCreateModal, setShowCreateModal] = useState(false);
     
     const handleCreateNew = () => {
       setShowCreateModal(true);
     };
     
     const handleModalSuccess = (person: Person) => {
       // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–µ—Ä—Å–æ–Ω—É
       onSelectionChange(person.id, person.full_name);
       setShowCreateModal(false);
     };
     
     return (
       <div>
         {/* ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ... */}
         
         <button
           type="button"
           onClick={handleCreateNew}
           className="..."
         >
           –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ {type === 'person' ? '—á–µ–ª–æ–≤–µ–∫–∞' : '–∫–æ–º–ø–∞–Ω–∏—é'}
         </button>
         
         {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è */}
         {type === 'person' && (
           <PersonModal
             isOpen={showCreateModal}
             onClose={() => setShowCreateModal(false)}
             personType={getPersonTypeFromLabel(label)} // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –ø–æ label
             mode="create"
             onSuccess={handleModalSuccess}
           />
         )}
       </div>
     );
   };
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å —Ö–µ–ª–ø–µ—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –ø–µ—Ä—Å–æ–Ω—ã:**
   ```typescript
   const getPersonTypeFromLabel = (label: string): 'director' | 'producer' | 'casting_director' => {
     if (label.includes('–ö–∞—Å—Ç–∏–Ω–≥-–¥–∏—Ä–µ–∫—Ç–æ—Ä')) return 'casting_director';
     if (label.includes('–†–µ–∂–∏—Å—Å–µ—Ä')) return 'director';
     if (label.includes('–ü—Ä–æ–¥—é—Å–µ—Ä')) return 'producer';
     return 'casting_director'; // default
   };
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 8:**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–∑ —Ñ–æ—Ä–º—ã –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ø–µ—Ä—Å–æ–Ω—ã
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–∏–ø –ø–µ—Ä—Å–æ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

### **–≠—Ç–∞–ø 9: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (3-4 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. **Unit-—Ç–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
   - [ ] PersonAvatar.test.tsx
   - [ ] PersonContacts.test.tsx
   - [ ] PersonProjects.test.tsx
   - [ ] PersonSearchBar.test.tsx
   - [ ] PersonForm.test.tsx
   - [ ] PersonModal.test.tsx
   - [ ] PersonTable.test.tsx

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
   - [ ] –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
   - [ ] –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
   - [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
   - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–æ—Ä–º–æ–π —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

3. **Browser —Ç–µ—Å—Ç—ã:**
   - [ ] –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ö–î
   - [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä—Å–æ–Ω—ã (–∫–ª–∏–∫ –ø–æ —Å—Ç—Ä–æ–∫–µ)
   - [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)
   - [ ] –£–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)
   - [ ] –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –ø—Ä–æ–µ–∫—Ç–∞
   - [ ] –ü–æ–∏—Å–∫ –ø–µ—Ä—Å–æ–Ω –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º
   - [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Å–µ–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º

4. **Backend —Ç–µ—Å—Ç—ã:**
   - [ ] –¢–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö API endpoints
   - [ ] –¢–µ—Å—Ç—ã –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∞)
   - [ ] –¢–µ—Å—Ç—ã –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ projects_count
   - [ ] –¢–µ—Å—Ç—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- [ ] –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä—Å–æ–Ω –ø–æ –≤—Å–µ–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∞)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–æ—Ä–º–æ–π —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–∞–±–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:
- [ ] –ö–æ–¥ —Å–ª–µ–¥—É–µ—Ç DRY –ø—Ä–∏–Ω—Ü–∏–ø—É
- [ ] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
- [ ] –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –ù–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –ù–µ—Ç TypeScript –æ—à–∏–±–æ–∫
- [ ] –ù–µ—Ç linter –æ—à–∏–±–æ–∫

### UX/UI:
- [ ] –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π
- [ ] –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è/–∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–ª–∞–≤–Ω–æ
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –û—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö

---

## ‚è±Ô∏è –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

| –≠—Ç–∞–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ä–µ–º—è |
|------|----------|-------|
| 1 | Backend API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ | 1-2 —á–∞—Å–∞ |
| 2 | Frontend - –°–µ—Ä–≤–∏—Å—ã –∏ —Ç–∏–ø—ã | 1 —á–∞—Å |
| 3 | Frontend - –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | 2-3 —á–∞—Å–∞ |
| 4 | Frontend - –§–æ—Ä–º–∞ –ø–µ—Ä—Å–æ–Ω—ã | 2-3 —á–∞—Å–∞ |
| 5 | Frontend - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ | 2 —á–∞—Å–∞ |
| 6 | Frontend - –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä—Å–æ–Ω | 2-3 —á–∞—Å–∞ |
| 7 | Frontend - –°—Ç—Ä–∞–Ω–∏—Ü—ã | 1 —á–∞—Å |
| 8 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–æ—Ä–º–æ–π –ø—Ä–æ–µ–∫—Ç–∞ | 2 —á–∞—Å–∞ |
| 9 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 3-4 —á–∞—Å–∞ |
| **–í–°–ï–ì–û** | | **16-22 —á–∞—Å–∞** |

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ

–≠—Ç–æ—Ç –ø–ª–∞–Ω –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. –í—Å–µ —ç—Ç–∞–ø—ã —Ä–∞—Å–ø–∏—Å–∞–Ω—ã –¥–µ—Ç–∞–ª—å–Ω–æ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞. 

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —ç—Ç–∞–ø –∑–∞ —ç—Ç–∞–ø–æ–º, —Ç–µ—Å—Ç–∏—Ä—É—è –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É.

**–í–æ–ø—Ä–æ—Å—ã –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:**
1. –ï—Å—Ç—å –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ä–º–µ –ø–µ—Ä—Å–æ–Ω—ã?
2. –ù—É–∂–Ω—ã –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ –ø–æ–∏—Å–∫–µ?
3. –ö–∞–∫–∏–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω—ã?
4. –ù—É–∂–Ω–∞ –ª–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä—Å–æ–Ω?
5. –ù—É–∂–Ω–∞ –ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä—Å–æ–Ω?

