# –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenAI API

## üî¥ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏: API –∫–ª—é—á –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:**
- –§–∞–π–ª `llm_config.yaml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- `use_emulator: false` - OpenAI API –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- –ú–æ–¥–µ–ª—å: `gpt-4o`

‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- `OPENAI_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞: `sk-proj-qU...epUf`

‚ùå **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API:**
- –û—à–∏–±–∫–∞ 401: Incorrect API key provided
- API –∫–ª—é—á –Ω–µ –ø—Ä–æ—à–µ–ª –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö OpenAI

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç OpenAI
3. –ù–∞–∂–º–∏—Ç–µ **"Create new secret key"**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á (–æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-proj-...`)

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ö–ª—é—á –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑! –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ.

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª .env

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:

```bash
OPENAI_API_KEY=–≤–∞—à_–Ω–æ–≤—ã–π_api_–∫–ª—é—á_–∑–¥–µ—Å—å
```

–ü—Ä–∏–º–µ—Ä:
```bash
OPENAI_API_KEY=sk-proj-abcd1234efgh5678ijkl9012mnop3456qrst
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
cd /Users/andrei_prygunov/Dev/agent_assistant/backend
python3 test_openai_connection.py
```

---

## üìã –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OpenAI

–ò–∑ —Ñ–∞–π–ª–∞ `llm_config.yaml`:

```yaml
llm:
  use_emulator: false      # ‚úÖ OpenAI –≤–∫–ª—é—á–µ–Ω
  model: 'gpt-4o'          # ‚úÖ –ú–æ–¥–µ–ª—å GPT-4o
  temperature: 0.3         # ‚úÖ –ù–∏–∑–∫–∞—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã)
  max_tokens: 4000         # ‚úÖ –ú–∞–∫—Å–∏–º—É–º 4000 —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
  max_retries: 3           # ‚úÖ 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
  timeout: 60              # ‚úÖ –¢–∞–π–º–∞—É—Ç 60 —Å–µ–∫—É–Ω–¥
```

---

## üéØ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ö–æ–≥–¥–∞ API –∫–ª—é—á –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –≤—ã —Å–º–æ–∂–µ—Ç–µ:

1. **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ö–î** —á–µ—Ä–µ–∑ OpenAI GPT-4o
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å:**
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø, –∂–∞–Ω—Ä)
   - –†–æ–ª–∏ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
   - –ö–æ–Ω—Ç–∞–∫—Ç—ã –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–µ–∫—Ç–∞
   - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–∫—Ç—ë—Ä–∞–º

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç:**
   ```
   POST /api/requests/{request_id}/analyze/
   ```

---

## üß™ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –†–µ–∂–∏–º —ç–º—É–ª—è—Ç–æ—Ä–∞

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –±–µ–∑ OpenAI (–±–µ—Å–ø–ª–∞—Ç–Ω–æ):

1. –û—Ç–∫—Ä–æ–π—Ç–µ `backend/llm_config.yaml`
2. –ò–∑–º–µ–Ω–∏—Ç–µ:
   ```yaml
   llm:
     use_emulator: true  # –í–∫–ª—é—á–∏—Ç—å —ç–º—É–ª—è—Ç–æ—Ä
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

–≠–º—É–ª—è—Ç–æ—Ä –≤–µ—Ä–Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ OpenAI API.

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OpenAI:** [https://platform.openai.com/docs](https://platform.openai.com/docs)
- **–ú–æ–¥–µ–ª—å GPT-4o:** –°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –∏ –¥–æ—Å—Ç—É–ø–Ω–∞—è –º–æ–¥–µ–ª—å GPT-4
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$2.50 –∑–∞ 1M input —Ç–æ–∫–µ–Ω–æ–≤, ~$10 –∑–∞ 1M output —Ç–æ–∫–µ–Ω–æ–≤

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–∞:** test_openai_connection.py

